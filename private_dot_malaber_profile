if [[ -n "$ZSH_NAME" && "$ZSH_NAME" == "zsh" ]]; then
    # Load the oh-my-zsh configlibrary.
    export ZSH=$HOME/.oh-my-zsh
    export ZSH_CUSTOM=$HOME/.zsh_custom
    ZSH_THEME="dschaedler"
    plugins=(
        git
    )

    source $ZSH/oh-my-zsh.sh
    export DISABLE_AUTO_UPDATE="true" # disable omz auto updates, this is done by chezmoi

    test -e "${HOME}/.iterm2_shell_integration.zsh" && source "${HOME}/.iterm2_shell_integration.zsh" || echo "iTerm shell integration missing, skipping..."

    #histcontrol (space before a command does not add it to command history)
    export HISTCONTROL=ignorespace
    #zsh
    unsetopt share_history
fi

#intelliJ
export IDEA_JDK=/usr/lib/jvm/intellij-jdk

# ruby
eval "$(rbenv init -)"
export PATH="$HOME/.rbenv/bin:$PATH"
#PATH="$(ruby -r rubygems -e 'puts Gem.user_dir')/bin:$PATH"

#python
export PYENV_ROOT="$HOME/.pyenv"
command -v pyenv >/dev/null || export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init --path)"
eval "$(pyenv init -)"

# Reusable function to add only missing SSH keys
function ssh-add-all {
    local key
    for key in ~/.ssh/id_ed25519; do
        if ! ssh-add -l | grep -q "$(ssh-keygen -lf "$key" | awk '{print $2}')"; then
            ssh-add --apple-use-keychain "$key"
        fi
    done
}
ssh-add-all || true # add keys on initial .profile load, ignore failure

# standard editor
export EDITOR=vim

#kubectl config
export KUBECONFIG="${HOME}/.kube/config"

# podman compose
export COMPOSE_MENU=0

source ~/.malaber_aliases
source ~/.topsecretfbiundercover
